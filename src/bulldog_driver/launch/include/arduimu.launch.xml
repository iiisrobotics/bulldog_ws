<?xml version="1.0"?>
<launch>
  <arg name="imu_dev"       default="/dev/ttyUSB0"/>
  <arg name="imu_raw_topic" default="imu/data_raw"/>  <!-- angular velocities and linear accelerations -->
  <arg name="imu_mag_topic" default="imu/mag"/>  <!-- magnetic field vector -->
  <arg name="world_frame"   default="enu"/>  <!-- East-North-Up -->
  <arg name="fixed_frame"   default="odom"/>  <!-- odometry reference -->

  <!-- Arduimu driver -->
  <node name="arduimu_driver" pkg="arduimu_ros" type="arduimu.py" output="screen" >
    <param name="port" value="$(arg imu_dev)"/>
  </node>

  <!-- IMU filter -->
  <node name="imu_filter_node" pkg="imu_filter_madgwick" type="imu_filter_node" respawn="false" output="screen">
    <remap from="imu/data_raw" to="$(arg imu_raw_topic)"/>
    <remap from="imu/mag" to="$(arg imu_mag_topic)"/>
    <param name="gain" value="0.01"/>
    <param name="zeta" value="0.001"/>
    <param name="orientation_stddev" value="0.001"/>
    <param name="use_mag" value="false"/>
    <param name="use_magnetic_field_msg" value="true"/>
    <param name="mag_bias_x" value="-0.000045215"/>
    <param name="mag_bias_y" value="-0.000006883"/>
    <param name="mag_bias_z" value="0.000091647"/>
    <param name="publish_tf" value="false"/>
    <param name="world_frame" value="$(arg world_frame)"/>
    <param name="fixed_frame" value="$(arg fixed_frame)"/>
  </node>
</launch>
